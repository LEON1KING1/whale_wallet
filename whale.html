<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Crypto Arbitrage Monitor</title>
<style>
body { font-family: Arial; background:#0f172a; color:#fff; padding:20px }
table { width:100%; border-collapse: collapse }
th, td { padding:10px; border-bottom:1px solid #334155; text-align:center }
th { background:#020617 }
.green { color:#22c55e }
.red { color:#ef4444 }
button { padding:5px 10px; background:#2563eb; color:#fff; border:none; cursor:pointer }
</style>
</head>
<body>

<h2>ðŸ“Š Crypto Arbitrage Dashboard</h2>

<table>
<thead>
<tr>
<th>Coin</th>
<th>Binance</th>
<th>OKX</th>
<th>KuCoin</th>
<th>Best Buy</th>
<th>Best Sell</th>
<th>Profit</th>
<th>Action</th>
</tr>
</thead>
<tbody id="data"></tbody>
</table>

<script>
const coins = [
  {s:"BTCUSDT", okx:"BTC-USDT", ku:"BTC-USDT"},
  {s:"ETHUSDT", okx:"ETH-USDT", ku:"ETH-USDT"},
  {s:"SOLUSDT", okx:"SOL-USDT", ku:"SOL-USDT"},
  {s:"TONUSDT", okx:"TON-USDT", ku:"TON-USDT"}
];

async function priceBinance(symbol){
  let r = await fetch(`https://api.binance.com/api/v3/ticker/price?symbol=${symbol}`);
  return parseFloat((await r.json()).price);
}

async function priceOKX(symbol){
  let r = await fetch(`https://www.okx.com/api/v5/market/ticker?instId=${symbol}`);
  return parseFloat((await r.json()).data[0].last);
}

async function priceKuCoin(symbol){
  let r = await fetch(`https://api.kucoin.com/api/v1/market/orderbook/level1?symbol=${symbol}`);
  return parseFloat((await r.json()).data.price);
}

async function load(){
  let html = "";
  for (let c of coins){
    let b = await priceBinance(c.s);
    let o = await priceOKX(c.okx);
    let k = await priceKuCoin(c.ku);

    let prices = {Binance:b, OKX:o, KuCoin:k};
    let buy = Math.min(...Object.values(prices));
    let sell = Math.max(...Object.values(prices));
    let profit = (sell - buy).toFixed(2);

    html += `
    <tr>
      <td>${c.s.replace("USDT","")}</td>
      <td>${b}</td>
      <td>${o}</td>
      <td>${k}</td>
      <td class="green">${buy}</td>
      <td class="green">${sell}</td>
      <td class="${profit>0?'green':'red'}">${profit} USDT</td>
      <td>
        <button onclick="window.open('https://www.binance.com/en/trade/${c.s}','_blank')">
        Convert
        </button>
      </td>
    </tr>`;
  }
  document.getElementById("data").innerHTML = html;
}

load();
setInterval(load,15000);
</script>

</body>
</html>
